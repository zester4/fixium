import type { DiagnosisResult, RepairGuide, RepairStep, Part, Tool } from '@/types/repair';

export const mockDiagnosis: DiagnosisResult = {
  damages: [
    {
      type: 'Cracked Display',
      description: 'Visible crack pattern radiating from impact point on lower-left corner. LCD appears intact beneath glass.',
      severity: 'moderate',
      location: 'Front glass panel',
    },
    {
      type: 'Damaged Digitizer',
      description: 'Touch response may be affected in damaged area. Recommend full display assembly replacement.',
      severity: 'moderate',
      location: 'Touch layer',
    },
  ],
  difficulty: 'intermediate',
  estimatedTime: '45-60 min',
  confidence: 87,
  failurePredictions: [
    'Flex cable damage during removal if not properly heated',
    'Battery swelling if punctured during prying',
    'Fingerprint sensor may need recalibration after repair',
  ],
  repairability: 'high',
};

export const mockRepairSteps: RepairStep[] = [
  {
    id: 'step-1',
    stepNumber: 1,
    title: 'Power Down & Remove SIM',
    instruction: 'Completely power off the device. Use the SIM eject tool to remove the SIM card tray from the right side of the phone.',
    detailedNotes: 'Ensure device is fully powered off to prevent electrical damage. Keep SIM tray in a safe place.',
    toolsRequired: ['SIM eject tool'],
    estimatedTime: '1 min',
  },
  {
    id: 'step-2',
    stepNumber: 2,
    title: 'Heat the Display Edges',
    instruction: 'Apply heat around all edges of the display for 2-3 minutes. Target temperature: 80-90Â°C. This softens the adhesive holding the screen.',
    detailedNotes: 'Use circular motions. Don\'t concentrate heat in one spot to avoid damage. The glass should be warm but not too hot to touch.',
    toolsRequired: ['Heat gun', 'iOpener'],
    warningLevel: 'caution',
    warningMessage: 'Excessive heat can damage the OLED panel. Keep moving the heat source.',
    estimatedTime: '3 min',
  },
  {
    id: 'step-3',
    stepNumber: 3,
    title: 'Insert Opening Pick',
    instruction: 'While the adhesive is soft, insert a thin opening pick at the bottom edge of the display. Slide it gently along the edge to break the seal.',
    detailedNotes: 'Start at the bottom where there are fewer components. Insert pick no more than 3mm to avoid cable damage.',
    toolsRequired: ['Opening picks', 'Suction cup'],
    warningLevel: 'warning',
    warningMessage: 'Do not insert pick deeper than 3mm. Flex cables run along the sides.',
    estimatedTime: '5 min',
  },
  {
    id: 'step-4',
    stepNumber: 4,
    title: 'Separate Display Adhesive',
    instruction: 'Work the opening pick around all four edges, leaving picks in place to prevent re-adhesion. Be especially careful near the top where the front camera is located.',
    toolsRequired: ['Opening picks'],
    estimatedTime: '8 min',
  },
  {
    id: 'step-5',
    stepNumber: 5,
    title: 'Lift Display Assembly',
    instruction: 'Once all edges are free, gently lift the display from the left side like opening a book. The display cables are attached on the right side.',
    detailedNotes: 'Don\'t pull the display away from the phone. It\'s still connected by flex cables.',
    toolsRequired: ['Suction cup', 'Spudger'],
    warningLevel: 'warning',
    warningMessage: 'Display flex cables are delicate. Lift slowly and don\'t strain the cables.',
    estimatedTime: '2 min',
  },
  {
    id: 'step-6',
    stepNumber: 6,
    title: 'Disconnect Battery',
    instruction: 'Locate the battery connector near the bottom-right. Use a plastic spudger to carefully pry up and disconnect the battery flex cable.',
    detailedNotes: 'Always disconnect the battery before any other connectors to prevent short circuits.',
    toolsRequired: ['Plastic spudger', 'Tweezers'],
    warningLevel: 'caution',
    warningMessage: 'Disconnecting the battery first prevents electrical damage.',
    estimatedTime: '2 min',
  },
  {
    id: 'step-7',
    stepNumber: 7,
    title: 'Remove Display Connector Shield',
    instruction: 'Remove the three Y000 screws securing the display connector bracket. Carefully lift off the metal shield.',
    detailedNotes: 'Keep screws organized. These are different lengths - mixing them can cause damage.',
    toolsRequired: ['Y000 screwdriver', 'Magnetic mat'],
    estimatedTime: '2 min',
  },
  {
    id: 'step-8',
    stepNumber: 8,
    title: 'Disconnect Display Cables',
    instruction: 'Use a spudger to carefully disconnect the display data cable and digitizer cable from the logic board.',
    toolsRequired: ['Plastic spudger'],
    estimatedTime: '2 min',
  },
  {
    id: 'step-9',
    stepNumber: 9,
    title: 'Remove Old Display',
    instruction: 'The display assembly is now free. Set it aside. Clean any remaining adhesive from the frame edges using isopropyl alcohol.',
    toolsRequired: ['Isopropyl alcohol', 'Lint-free cloth'],
    estimatedTime: '5 min',
  },
  {
    id: 'step-10',
    stepNumber: 10,
    title: 'Install New Display',
    instruction: 'Connect the new display cables to the logic board. Press firmly until they click into place. Reinstall the connector bracket and screws.',
    toolsRequired: ['Y000 screwdriver', 'Plastic spudger'],
    estimatedTime: '3 min',
  },
  {
    id: 'step-11',
    stepNumber: 11,
    title: 'Reconnect Battery',
    instruction: 'Reconnect the battery flex cable by pressing down firmly on the connector.',
    toolsRequired: ['Plastic spudger'],
    estimatedTime: '1 min',
  },
  {
    id: 'step-12',
    stepNumber: 12,
    title: 'Test Before Sealing',
    instruction: 'Power on the device and test all display functions: touch response, display quality, Face ID, and front camera before applying new adhesive.',
    detailedNotes: 'If anything doesn\'t work, disconnect battery and reseat the cables before troubleshooting further.',
    toolsRequired: [],
    estimatedTime: '3 min',
  },
  {
    id: 'step-13',
    stepNumber: 13,
    title: 'Apply New Adhesive',
    instruction: 'Apply the new display adhesive strips to the frame. Remove backing and carefully align the display, pressing firmly around all edges.',
    toolsRequired: ['Display adhesive strips'],
    estimatedTime: '5 min',
  },
  {
    id: 'step-14',
    stepNumber: 14,
    title: 'Final Assembly',
    instruction: 'Reinstall the SIM tray. Apply firm, even pressure around the display edges for 30 seconds to ensure proper adhesion.',
    detailedNotes: 'Avoid using the device heavily for 24 hours to allow adhesive to fully cure.',
    toolsRequired: ['SIM tray'],
    estimatedTime: '2 min',
  },
];

export const mockParts: Part[] = [
  {
    id: 'part-1',
    name: 'Display Assembly (OLED)',
    partNumber: 'IP14-OLED-BLK',
    estimatedCost: { min: 89, max: 150, currency: 'USD' },
    suppliers: [
      { name: 'iFixit', url: 'https://ifixit.com', price: 129 },
      { name: 'Amazon', url: 'https://amazon.com', price: 99 },
      { name: 'Mobile Defenders', url: 'https://mobiledefenders.com', price: 119 },
    ],
    difficulty: 'intermediate',
    isRequired: true,
  },
  {
    id: 'part-2',
    name: 'Display Adhesive Strips',
    estimatedCost: { min: 5, max: 12, currency: 'USD' },
    suppliers: [
      { name: 'iFixit', url: 'https://ifixit.com', price: 8 },
    ],
    difficulty: 'beginner',
    isRequired: true,
  },
];

export const mockTools: Tool[] = [
  { id: 'tool-1', name: 'Pentalobe P2 Screwdriver', icon: 'screwdriver', isRequired: true },
  { id: 'tool-2', name: 'Y000 Tri-point Screwdriver', icon: 'screwdriver', isRequired: true },
  { id: 'tool-3', name: 'Suction Cup', icon: 'circle', isRequired: true },
  { id: 'tool-4', name: 'Opening Picks (set of 6)', icon: 'triangle', isRequired: true },
  { id: 'tool-5', name: 'Plastic Spudger', icon: 'minus', isRequired: true },
  { id: 'tool-6', name: 'Heat Gun or iOpener', icon: 'flame', isRequired: true, substitutes: ['Hair dryer on high'] },
  { id: 'tool-7', name: 'Tweezers', icon: 'grip', isRequired: false },
  { id: 'tool-8', name: 'Magnetic Project Mat', icon: 'layout-grid', isRequired: false },
  { id: 'tool-9', name: 'Isopropyl Alcohol (90%+)', icon: 'droplet', isRequired: true },
  { id: 'tool-10', name: 'Lint-free Cloth', icon: 'square', isRequired: true },
];

export const mockRepairGuide: RepairGuide = {
  id: 'guide-1',
  deviceInfo: {
    category: 'phone',
    model: 'iPhone 14',
    brand: 'Apple',
  },
  diagnosis: mockDiagnosis,
  steps: mockRepairSteps,
  parts: mockParts,
  tools: mockTools,
  createdAt: Date.now(),
};
